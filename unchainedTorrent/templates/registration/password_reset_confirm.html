{% extends 'base.html' %}

{% block title %}Enter New Password{% endblock %}
{% block content %}

<div class="container jumbotron py-2 mt-4" style="max-width:540px">
    {% if validlink %}
        <h3 class="text-center mb-4">Enter New Password</h3>
        <p class="text-center text-muted">Please enter your new password twice so we can verify you typed it in correctly.</p>
        
        <form method="post">
            {% csrf_token %}
            
            <div class="row">
                <div class="col-lg-4">
                    <label for="id_new_password1">New password:</label>
                </div>
                <div class="col-lg-8">
                    <input type="password" class="form-control mb-2" name="new_password1" id="id_new_password1" required>
                </div>
                
                <div class="col-lg-4">
                    <label for="id_new_password2">Confirm password:</label>
                </div>
                <div class="col-lg-8">
                    <input type="password" class="form-control mb-2" name="new_password2" id="id_new_password2" required>
                </div>
                
                <div class="col-12">
                    <div class="d-flex justify-content-center">
                        <button type="submit" class="btn btn-primary">Change My Password</button>
                    </div>
                </div>
            </div>
        </form>
    {% else %}
        <div class="text-center">
            <h3 class="text-danger mb-4">Password Reset Failed</h3>
            <p class="text-muted mb-4">The password reset link was invalid, possibly because it has already been used. Please request a new password reset.</p>
            
            <div class="mt-4">
                <a href="{% url 'password_reset' %}" class="btn btn-primary">Request New Password Reset</a>
            </div>
        </div>
    {% endif %}
</div>

{% endblock %}